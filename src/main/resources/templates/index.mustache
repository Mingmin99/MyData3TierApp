<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyData 서비스</title>
    <link rel="stylesheet" href="../css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<div class="header">
    <h1>MyData 자산 관리 및 대출 조건 비교</h1>
    <nav class="navbar">
        <ul>
            <li><a href="/assets">자산 관리</a></li>
            <li><a href="/loans">대출 조건</a></li>
            <li><a href="/notices">공지사항</a></li>
            <li><a href="/profile">마이 페이지</a></li>
        </ul>
    </nav>
</div>
<div class="sidebar" id="login-form-container">
    <div class="sidebarTitle"><h2>로그인</h2></div>
    <form class="login-form" id="login-form">
        <input type="text" name="id" placeholder="아이디" required>
        <input type="password" name="password" placeholder="비밀번호" required>
        <button type="submit">로그인</button>
        <a href="/signup" class="signup-button">회원가입</a>
    </form>
</div>
<div class="main-content">
    <h2>서비스 소개</h2>
    <p>MyData 서비스는 개인의 자산 관리와 최적의 대출 조건을 비교하여 제공하는 플랫폼입니다. 여기에서는 사용자의 재정 상태를 파악하고, 최적의 대출 옵션을 찾을 수 있도록 도와줍니다.</p>
    <div class="additional-info">
        <h3>특징 및 혜택</h3>
        <ul>
            <li>실시간 자산 관리</li>
            <li>다양한 대출 조건 비교</li>
            <li>개인 맞춤형 금융 조언</li>
        </ul>
    </div>
</div>
<div id="welcome-area" style="display: none;">
    <h1 id="welcome-message"></h1>
</div>
<script>
    $(document).ready(function () {
        $('#login-form').submit(function (e) {
            e.preventDefault(); // 폼 전송 중지
            var loginData = {
                id: $("input[name='id']").val(),
                password: $("input[name='password']").val()
            };

            console.log("로그인 데이터:", loginData); // 데이터 전송 전 로그 추가

            $.ajax({
                type: "POST",
                url: "/login",
                contentType: "application/json",
                dataType: "json",
                data: JSON.stringify(loginData),
                success: function (response) {
                    console.log("응답 데이터:", response); // 응답 로그 추가
                    if (response.success) {
                        console.log("로그인 성공!"); // 로그인 성공 로그 추가
                        console.log("이 이름이 떠야해: " + response.username);
                        $('#login-form').hide(); // 로그인 폼 숨기기
                        $('#welcome-message').text(response.username + '님, 환영합니다!');
                        $('#welcome-area').appendTo('#login-form-container').show(); // 환영 메시지 보여주기
                    } else {
                        console.log("로그인 실패:", response.message); // 로그인 실패 로그 추가
                        alert('로그인 실패: ' + response.message);
                    }
                },
                error: function (xhr) {
                    console.log("로그인 처리 중 오류:", xhr.responseText); // 오류 로그 추가
                    alert("로그인 처리 중 오류가 발생했습니다: " + xhr.responseText);
                }
            });
        });
    });
</script>
</body>
</html>
